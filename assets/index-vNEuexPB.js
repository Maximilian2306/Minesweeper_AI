(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function e(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(l){if(l.ep)return;l.ep=!0;const s=e(l);fetch(l.href,s)}})();let a=10,Y=10;const r=[];let B=!1,F=null,P=null,g=!1,ce=null;const fe=document.getElementById("timer"),ue=document.getElementById("mine-count"),T=document.getElementById("game-board"),w=document.getElementById("header-container"),W="minesweeper-leaderboard",q=document.getElementById("leaderboard-list"),G=document.getElementById("leaderboard-list-popup"),me=document.getElementById("settings-btn"),ye=document.getElementById("save-settings-btn"),ge=document.getElementById("about-btn"),pe=document.getElementById("close-about-btn"),he=document.getElementById("start-btn"),be=document.querySelectorAll(".mode-btn"),X=document.getElementById("kiActBtn"),ve=document.getElementById("startRuleKI"),xe=document.getElementById("startRandomKI"),p=document.getElementById("kiMenu"),x=document.getElementById("stopKI"),Ee=document.getElementById("restart-btn"),Be=document.getElementById("game-over-btn"),we=document.getElementById("game-over-leaderboard-btn"),Le=document.getElementById("game-win-btn"),Ie=document.getElementById("game-win-leaderboard-btn"),Q=document.getElementById("save-nameInp-btn"),ke=document.getElementById("open-leaderboard-btn"),Se=document.getElementById("close-leaderboard-btn"),Ce=document.getElementById("clear-leaderboard-btn"),Z=document.getElementById("settings-popup"),ee=document.getElementById("about-popup"),te=document.getElementById("mode-popup"),ne=document.getElementById("game-over"),le=document.getElementById("game-win"),oe=document.getElementById("game-win-nameInp"),D=document.getElementById("leaderboard-popup");me.addEventListener("click",()=>{Z.style.display="flex",document.body.classList.add("popup-open")});ye.addEventListener("click",()=>{Z.style.display="none",document.body.classList.remove("popup-open")});ge.addEventListener("click",()=>{ee.style.display="flex",document.body.classList.add("popup-open")});he.addEventListener("click",()=>{te.style.display="flex",document.body.classList.add("popup-open")});pe.addEventListener("click",()=>{ee.style.display="none",document.body.classList.remove("popup-open")});be.forEach(n=>{n.addEventListener("click",()=>{a=parseInt(n.getAttribute("data-size")),Y=parseInt(n.getAttribute("data-mines")),T.style.gridTemplateColumns=`repeat(${a}, 30px)`,T.style.gridTemplateRows=`repeat(${a}, 30px)`,te.style.display="none",document.body.classList.remove("popup-open"),g=!1,x.style.display="none",p.style.display="none",w.style.maxWidth="360px",k()})});X.addEventListener("click",n=>{if(p.style.display==="none"){const t=X.getBoundingClientRect();p.style.left=t.left+"px",p.style.top=t.bottom+window.scrollY+"px",p.style.display="block"}else p.style.display="none"});x.addEventListener("click",()=>{g=!1,x.style.display="none",w.style.maxWidth="360px",p.style.display="none",clearTimeout(ce)});xe.addEventListener("click",async()=>{if(p.style.display="none",x.style.display="inline-block",w.style.maxWidth="460px",g)return;g=!0;let n=[];for(let e=0;e<a;e++)for(let o=0;o<a;o++){const l=r[e][o];!l.revealed&&!l.flagged&&n.push({x:o,y:e})}for(let e=n.length-1;e>0;e--){const o=Math.floor(Math.random()*(e+1));[n[e],n[o]]=[n[o],n[e]]}let t=0;for(;g&&t<n.length;){if(await b(.1),B){k(),await b(1),n=[];for(let o=0;o<a;o++)for(let l=0;l<a;l++){const s=r[o][l];!s.revealed&&!s.flagged&&n.push({x:l,y:o})}for(let o=n.length-1;o>0;o--){const l=Math.floor(Math.random()*(o+1));[n[o],n[l]]=[n[l],n[o]]}t=0;continue}const e=n[t++];E(e.x,e.y)}});function b(n){return new Promise(t=>setTimeout(t,n))}ve.addEventListener("click",async()=>{if(!(B||g))for(p.style.display="none",x.style.display="inline-block",w.style.maxWidth="460px",g=!0;g;){if(await b(.1),B){k(),await b(1);continue}let n=!1;if(n=await Me(),n||(n=await Ae()),n||(n=await Ne()),n||(n=await Re()),!n){const t=Pe();if(t)E(t.x,t.y),n=!0;else{const e=Te();if(e)E(e.x,e.y),n=!0;else{g=!1,x.style.display="none",w.style.maxWidth="360px";break}}}}});async function Me(){let n=!1;for(let t=0;t<a;t++)for(let e=0;e<a;e++){const o=r[t][e];if(!o.revealed||o.number===0)continue;const l=h(e,t),s=l.filter(f=>f.flagged).length,i=l.filter(f=>!f.revealed&&!f.flagged);if(s===o.number&&i.length>0){for(const f of i)E(f.x,f.y),n=!0,await b(.1);continue}if(i.length>0&&i.length===o.number-s)for(const f of i)f.flagged||(ie(f.x,f.y),n=!0,await b(.1))}return n}async function Ae(){let n=!1;for(let t=0;t<a;t++)for(let e=0;e<a;e++){const o=r[t][e];if(!o.revealed||o.number!==1)continue;const l=h(e,t),s=l.filter(i=>!i.revealed&&!i.flagged);if(s.length===2){for(const i of l)if(i.revealed&&i.number===1){const c=h(i.x,i.y).filter(y=>!y.revealed&&!y.flagged);if(c.length===2){const y=s.find(d=>c.includes(d));if(y){const d=s.find(S=>S!==y)||c.find(S=>S!==y);if(d&&!d.flagged)return E(d.x,d.y),n=!0,await b(.1),n}}}}}return n}async function Ne(){let n=!1;for(let t=0;t<a;t++)for(let e=1;e<a-2;e++){const o=r[t][e],l=r[t][e+1],s=r[t][e+2];if(!o.revealed||!l.revealed||!s.revealed||o.number!==1||l.number!==2||s.number!==1)continue;const i=[t>0?r[t-1][e]:null,t>0?r[t-1][e+1]:null,t>0?r[t-1][e+2]:null].filter(c=>c&&!c.revealed&&!c.flagged),f=[t<a-1?r[t+1][e]:null,t<a-1?r[t+1][e+1]:null,t<a-1?r[t+1][e+2]:null].filter(c=>c&&!c.revealed&&!c.flagged);if(i.length===3&&f.length===3){const c=h(e,t).filter(d=>!d.revealed&&!d.flagged),y=h(e+2,t).filter(d=>!d.revealed&&!d.flagged);if(c.length===2&&y.length===2){const d=r[t+1]?r[t+1][e+1]:r[t-1][e+1];if(d&&!d.revealed&&!d.flagged)return E(d.x,d.y),n=!0,await b(.1),n}}}for(let t=1;t<a-2;t++)for(let e=0;e<a;e++){const o=r[t][e],l=r[t+1][e],s=r[t+2][e];if(!o.revealed||!l.revealed||!s.revealed||o.number!==1||l.number!==2||s.number!==1)continue;const i=[e>0?r[t][e-1]:null,e>0?r[t+1][e-1]:null,e>0?r[t+2][e-1]:null].filter(c=>c&&!c.revealed&&!c.flagged),f=[e<a-1?r[t][e+1]:null,e<a-1?r[t+1][e+1]:null,e<a-1?r[t+2][e+1]:null].filter(c=>c&&!c.revealed&&!c.flagged);if(i.length===3&&f.length===3){const c=h(e,t).filter(d=>!d.revealed&&!d.flagged),y=h(e,t+2).filter(d=>!d.revealed&&!d.flagged);if(c.length===2&&y.length===2){const d=r[t+1][e+1]||r[t+1][e-1];if(d&&!d.revealed&&!d.flagged)return E(d.x,d.y),n=!0,await b(.1),n}}}return n}async function Re(){let n=!1;for(let t=0;t<a;t++)for(let e=0;e<a;e++){const o=r[t][e];if(!o.revealed||o.number!==1)continue;const l=h(e,t),s=l.filter(i=>!i.revealed&&!i.flagged);if(s.length===2){for(const i of l)if(i.revealed&&i.number===1){const c=h(i.x,i.y).filter(y=>!y.revealed&&!y.flagged);if(c.length===2&&(c[0]===s[0]||c[0]===s[1]||c[1]===s[0]||c[1]===s[1])){const y=c.find(d=>!s.includes(d));if(y)return E(y.x,y.y),n=!0,await b(.1),n}}}}return n}function Pe(){for(let n=0;n<a;n++)for(let t=0;t<a;t++){const e=r[n][t];if(e.revealed||e.flagged)continue;const l=h(t,n).filter(s=>s.revealed);if(l.length>0&&l.every(s=>s.number===0))return e}return null}function Te(){let n=null,t=1;for(let e=0;e<a;e++)for(let o=0;o<a;o++){const l=r[e][o];if(l.revealed||l.flagged)continue;const i=h(o,e).filter(d=>d.revealed&&d.number>0);if(i.length===0){n||(n=l);continue}let f=0,c=0;for(const d of i){const S=h(d.x,d.y),U=S.filter(H=>!H.revealed&&!H.flagged),re=S.filter(H=>H.flagged).length,de=d.number-re;U.length>0&&(f+=de,c+=U.length)}const y=c>0?f/c:0;y<t&&(t=y,n=l)}return n}function h(n,t){const e=[];for(let o=-1;o<=1;o++)for(let l=-1;l<=1;l++){if(o===0&&l===0)continue;const s=n+o,i=t+l;if(s>=0&&s<a&&i>=0&&i<a){const f=r[i][s];e.push({...f,x:s,y:i})}}return e}Ee.addEventListener("click",()=>{k(),g=!1,x.style.display="none",p.style.display="none",w.style.maxWidth="360px"});Be.addEventListener("click",k);Le.addEventListener("click",k);we.addEventListener("click",()=>{C(),D.style.display="flex",document.body.classList.add("popup-open")});Ie.addEventListener("click",()=>{C(),D.style.display="flex",document.body.classList.add("popup-open")});ke.addEventListener("click",()=>{C(),g=!1,x.style.display="none",p.style.display="none",w.style.maxWidth="360px",D.style.display="flex",document.body.classList.add("popup-open")});Se.addEventListener("click",()=>{D.style.display="none",document.body.classList.remove("popup-open")});Ce.addEventListener("click",()=>{if(localStorage.getItem(W)===null){alert("Die Bestenliste ist bereits leer.");return}else confirm("Bist du sicher, dass du die Bestenliste lÃ¶schen willst?")&&(localStorage.removeItem(W),C())});Q.addEventListener("click",()=>{oe.style.display="none"});function k(){T.innerHTML="",B=!1,r.length=0,ue.textContent=`Minen: ${Y}`,We(),He(),Oe(),De(),ne.style.display="none",le.style.display="none",F=Date.now(),P&&clearInterval(P),P=setInterval(Fe,1e3),C()}function We(){for(let n=0;n<a;n++){r[n]=[];for(let t=0;t<a;t++)r[n][t]={x:t,y:n,mine:!1,revealed:!1,flagged:!1,number:0}}}function He(){let n=0;for(;n<Y;){const t=Math.floor(Math.random()*a),e=Math.floor(Math.random()*a),o=r[e][t];o.mine||(o.mine=!0,n++)}}function Oe(){for(let n=0;n<a;n++)for(let t=0;t<a;t++){const e=r[n][t];e.mine||(e.number=$e(t,n))}}function $e(n,t){let e=0;for(let o=-1;o<=1;o++)for(let l=-1;l<=1;l++){if(l===0&&o===0)continue;const s=n+l,i=t+o;s>=0&&s<a&&i>=0&&i<a&&r[i][s].mine&&e++}return e}function De(){for(let n=0;n<a;n++)for(let t=0;t<a;t++){r[n][t];const e=document.createElement("div");e.classList.add("cell"),e.dataset.x=t,e.dataset.y=n,e.addEventListener("click",()=>E(t,n)),e.addEventListener("contextmenu",o=>{o.preventDefault(),ie(t,n)}),T.appendChild(e)}}function E(n,t){if(B)return;const e=r[t][n];e.revealed||e.flagged||(e.revealed=!0,_(n,t),e.mine&&(j(),g||Ge(),B=!0,clearInterval(P)),Ke()&&(g&&(x.style.display="none",p.style.display="none",w.style.maxWidth="360px",g=!1),j(),Ye(),B=!0,clearInterval(P)))}function ie(n,t){if(B)return;const e=r[t][n];e.revealed||(e.flagged=!e.flagged,_(n,t))}function Ke(){for(let n=0;n<a;n++)for(let t=0;t<a;t++){const e=r[n][t];if(!e.mine&&!e.revealed)return!1}return!0}function _(n,t){const e=r[t][n],o=qe(n,t);o.classList.toggle("revealed",e.revealed),o.classList.toggle("mine",e.revealed&&e.mine),o.classList.toggle("flagged",e.flagged&&!e.revealed),o.textContent="",e.revealed&&e.mine&&(o.textContent="ð£"),e.revealed&&e.number>0&&!e.mine&&(o.textContent=e.number),e.flagged&&!e.revealed&&(o.textContent="ð©")}function j(){for(let n=0;n<a;n++)for(let t=0;t<a;t++){const e=r[n][t];e.mine&&(e.revealed=!0,_(t,n))}}function qe(n,t){const e=t*a+n;return T.children[e]}function Ge(){ne.style.display="block"}function Ye(){le.style.display="block";const n=Date.now(),t=Math.floor((n-F)/1e3);_e(t)}function Fe(){const n=Date.now(),t=Math.floor((n-F)/1e3),e=Math.floor(t/60).toString().padStart(2,"0"),o=(t%60).toString().padStart(2,"0");fe.textContent=`${e}:${o}`}async function _e(n){oe.style.display="block",await new Promise(l=>{Q.onclick=()=>{l()}});const t=document.getElementById("nameInp");if(console.log(t.value),!t)return;const e={name:t,time:n};let o=JSON.parse(localStorage.getItem(W))||[];o.push(e),o.sort((l,s)=>l.time-s.time),o=o.slice(0,10),localStorage.setItem(W,JSON.stringify(o)),C()}function C(){const n=JSON.parse(localStorage.getItem(W))||[];if(q.innerHTML="",G.innerHTML="",n.length===0){q.innerHTML="<li>Keine EintrÃ¤ge</li>",G.innerHTML="<li>Keine EintrÃ¤ge</li>";return}n.forEach(t=>{const e=document.createElement("li"),o=document.createElement("li"),l=ze(t.time);e.innerHTML=`<span>${t.name}</span><span>${l}</span>`,o.innerHTML=`<span>${t.name}</span><span>${l}</span>`,q.appendChild(e),G.appendChild(o)})}function ze(n){const t=Math.floor(n/60).toString().padStart(2,"0"),e=(n%60).toString().padStart(2,"0");return`${t}:${e}`}const Je=document.getElementById("arcade-btn"),se=document.getElementById("arcade-view"),Ue=document.getElementById("exit-arcade"),z=document.getElementById("arcade-menu"),u=document.getElementById("pong-canvas"),m=u.getContext("2d"),Xe=document.querySelectorAll(".game-select");let J=null,O=null;Je.addEventListener("click",()=>{document.body.style.overflow="hidden",document.querySelector(".game-container").style.display="none",se.style.display="flex",z.style.display="flex",u.style.display="none"});Ue.addEventListener("click",()=>{se.style.display="none",document.querySelector(".game-container").style.display="grid",document.body.style.overflow="auto",cancelAnimationFrame(J),K()});Xe.forEach(n=>{n.addEventListener("click",()=>{O=n.dataset.game,z.style.display="none",u.style.display="block",O==="pong"?ae():O==="snake"?je():O==="invaders"&&Ve()})});function K(){m.clearRect(0,0,u.width,u.height),u.style.display="none",z.style.display="flex"}let $=100,M=10,A=200,N=200,L=400,v=250,R=4,V=4;const I={};document.addEventListener("keydown",n=>I[n.key]=!0);document.addEventListener("keyup",n=>I[n.key]=!1);u.width=800;u.height=500;function ae(){if(I.w&&(A-=5),I.s&&(A+=5),I.ArrowUp&&(N-=5),I.ArrowDown&&(N+=5),I.Escape)return K();L+=R,v+=V,(v<=0||v>=u.height)&&(V*=-1),L<=M&&v>A&&v<A+$&&(R*=-1),L>=u.width-M&&v>N&&v<N+$&&(R*=-1),(L<0||L>u.width)&&(L=u.width/2,v=u.height/2,R=-R),m.clearRect(0,0,u.width,u.height),m.fillStyle="white",m.fillRect(0,A,M,$),m.fillRect(u.width-M,N,M,$),m.beginPath(),m.arc(L,v,10,0,Math.PI*2),m.fill(),J=requestAnimationFrame(ae)}function je(){let n=[{x:10,y:10}],t={x:15,y:15},e=1,o=0,l=20;document.addEventListener("keydown",i=>{i.key==="ArrowUp"&&o===0&&(e=0,o=-1),i.key==="ArrowDown"&&o===0&&(e=0,o=1),i.key==="ArrowLeft"&&e===0&&(e=-1,o=0),i.key==="ArrowRight"&&e===0&&(e=1,o=0)});function s(){const i={x:n[0].x+e,y:n[0].y+o};if(i.x<0||i.x>=u.width/l||i.y<0||i.y>=u.height/l||n.some(f=>f.x===i.x&&f.y===i.y))return alert("ð Snake Game Over!"),K();n.unshift(i),i.x===t.x&&i.y===t.y?t={x:Math.floor(Math.random()*(u.width/l)),y:Math.floor(Math.random()*(u.height/l))}:n.pop(),m.fillStyle="black",m.fillRect(0,0,u.width,u.height),m.fillStyle="lime",n.forEach(f=>m.fillRect(f.x*l,f.y*l,l-1,l-1)),m.fillStyle="red",m.fillRect(t.x*l,t.y*l,l-1,l-1),setTimeout(s,50)}s()}function Ve(){let n=u.width/2,t=[],e=Array.from({length:5},(l,s)=>({x:s*100+50,y:50}));document.addEventListener("keydown",l=>{l.key==="ArrowLeft"&&(n-=15),l.key==="ArrowRight"&&(n+=15),(l.key===" "||l.key==="Spacebar")&&t.push({x:n+15,y:u.height-30})});function o(){if(m.fillStyle="black",m.fillRect(0,0,u.width,u.height),m.fillStyle="white",m.fillRect(n,u.height-20,30,10),m.fillStyle="yellow",t.forEach(l=>{l.y-=5,m.fillRect(l.x,l.y,3,10)}),m.fillStyle="lime",e.forEach(l=>m.fillRect(l.x,l.y,30,20)),t.forEach((l,s)=>{e.forEach((i,f)=>{l.x>i.x&&l.x<i.x+30&&l.y>i.y&&l.y<i.y+20&&(e.splice(f,1),t.splice(s,1))})}),e.length===0)return alert("ð You won!"),K();J=requestAnimationFrame(o)}o()}k();
